diff --git a/boards.cmake/esp-idf.cmake b/boards.cmake/esp-idf.cmake
index c22b33e..5f67f0f 100644
--- a/boards.cmake/esp-idf.cmake
+++ b/boards.cmake/esp-idf.cmake
@@ -3,31 +3,51 @@
 set(COMPONENT_ADD_INCLUDEDIRS
     ${LGFX_ROOT}/src
     )
-file(GLOB SRCS
-     ${LGFX_ROOT}/src/lgfx/Fonts/efont/*.c
-     ${LGFX_ROOT}/src/lgfx/Fonts/IPA/*.c
-     ${LGFX_ROOT}/src/lgfx/utility/*.c
-     ${LGFX_ROOT}/src/lgfx/v1/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/misc/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/panel/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/platforms/arduino_default/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32c3/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32s2/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32s3/*.cpp
-     ${LGFX_ROOT}/src/lgfx/v1/touch/*.cpp
-     )
 
-set(COMPONENT_SRCS ${SRCS})
-
-if (IDF_VERSION_MAJOR GREATER_EQUAL 5)
-    set(COMPONENT_REQUIRES nvs_flash efuse esp_lcd driver esp_timer)
-elseif ((IDF_VERSION_MAJOR EQUAL 4) AND (IDF_VERSION_MINOR GREATER 3) OR IDF_VERSION_MAJOR GREATER 4)
-    set(COMPONENT_REQUIRES nvs_flash efuse esp_lcd)
+# Check if building for Linux target
+if (IDF_TARGET STREQUAL "linux")
+    # Linux (SDL2) specific sources
+    # Note: Panel files are in platforms/sdl/ directory, not panel/
+    file(GLOB SRCS
+         ${LGFX_ROOT}/src/lgfx/Fonts/efont/*.c
+         ${LGFX_ROOT}/src/lgfx/Fonts/IPA/*.c
+         ${LGFX_ROOT}/src/lgfx/utility/*.c
+         ${LGFX_ROOT}/src/lgfx/v1/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/misc/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/platforms/sdl/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/touch/*.cpp
+         )
+    # Add Panel base classes needed by Panel_sdl
+    list(APPEND SRCS ${LGFX_ROOT}/src/lgfx/v1/panel/Panel_Device.cpp)
+    list(APPEND SRCS ${LGFX_ROOT}/src/lgfx/v1/panel/Panel_FrameBufferBase.cpp)
+    set(COMPONENT_REQUIRES)
 else()
-    set(COMPONENT_REQUIRES nvs_flash efuse)
+    # ESP32 specific sources
+    file(GLOB SRCS
+         ${LGFX_ROOT}/src/lgfx/Fonts/efont/*.c
+         ${LGFX_ROOT}/src/lgfx/Fonts/IPA/*.c
+         ${LGFX_ROOT}/src/lgfx/utility/*.c
+         ${LGFX_ROOT}/src/lgfx/v1/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/misc/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/panel/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/platforms/arduino_default/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32c3/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32s2/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/platforms/esp32s3/*.cpp
+         ${LGFX_ROOT}/src/lgfx/v1/touch/*.cpp
+         )
+    if (IDF_VERSION_MAJOR GREATER_EQUAL 5)
+        set(COMPONENT_REQUIRES nvs_flash efuse esp_lcd driver esp_timer)
+    elseif ((IDF_VERSION_MAJOR EQUAL 4) AND (IDF_VERSION_MINOR GREATER 3) OR IDF_VERSION_MAJOR GREATER 4)
+        set(COMPONENT_REQUIRES nvs_flash efuse esp_lcd)
+    else()
+        set(COMPONENT_REQUIRES nvs_flash efuse)
+    endif()
 endif()
 
+set(COMPONENT_SRCS ${SRCS})
+
 
 ### If you use arduino-esp32 components, please activate next comment line.
 # list(APPEND COMPONENT_REQUIRES arduino-esp32)
@@ -36,3 +56,13 @@ endif()
 message(STATUS "LovyanGFX use components = ${COMPONENT_REQUIRES}")
 
 register_component()
+
+# Add platform-specific compile definitions after registration
+if (IDF_TARGET STREQUAL "linux")
+    target_compile_definitions(${COMPONENT_LIB} PRIVATE LGFX_USE_SDL)
+    # Link SDL2 library for Linux builds
+    # SDL2 is linked in main component, so just add include path here
+    target_include_directories(${COMPONENT_LIB} PRIVATE /usr/include/SDL2)
+    # Suppress specific warnings that occur in LovyanGFX on Linux builds
+    target_compile_options(${COMPONENT_LIB} PRIVATE -Wno-maybe-uninitialized)
+endif()
diff --git a/src/lgfx/v1/platforms/common.hpp b/src/lgfx/v1/platforms/common.hpp
index 1a64330..10fc52a 100644
--- a/src/lgfx/v1/platforms/common.hpp
+++ b/src/lgfx/v1/platforms/common.hpp
@@ -17,7 +17,16 @@ Contributors:
 /----------------------------------------------------------------------------*/
 #pragma once
 
-#if defined (ESP_PLATFORM)
+// Check for SDL2-based builds first (ESP-IDF Linux target)
+#if defined(LGFX_USE_SDL) || ((__has_include(<SDL2/SDL.h>) || __has_include(<SDL.h>)) && !defined(LGFX_LINUX_FB))
+
+#include "sdl/common.hpp"
+
+#elif __has_include(<opencv2/opencv.hpp>) && !defined(LGFX_LINUX_FB)
+
+#include "opencv/common.hpp"
+
+#elif defined (ESP_PLATFORM)
 
 #include "esp32/common.hpp"
 
@@ -49,14 +58,6 @@ Contributors:
 
 #include "arduino_default/common.hpp"
 
-#elif (__has_include(<SDL2/SDL.h>) || __has_include(<SDL.h>)) && !defined(LGFX_LINUX_FB)
-
-#include "sdl/common.hpp"
-
-#elif __has_include(<opencv2/opencv.hpp>) && !defined(LGFX_LINUX_FB)
-
-#include "opencv/common.hpp"
-
 #elif defined (__linux__) && defined(LGFX_LINUX_FB)
 
 #include "framebuffer/common.hpp"
diff --git a/src/lgfx/v1/platforms/device.hpp b/src/lgfx/v1/platforms/device.hpp
index e1f6dd0..dcc2f88 100644
--- a/src/lgfx/v1/platforms/device.hpp
+++ b/src/lgfx/v1/platforms/device.hpp
@@ -17,7 +17,13 @@ Contributors:
 /----------------------------------------------------------------------------*/
 #pragma once
 
-#if defined (ESP_PLATFORM)
+// Check for SDL/Linux target first (ESP-IDF Linux target)
+#if defined(LGFX_USE_SDL) || ((__has_include(<SDL2/SDL.h>) || __has_include(<SDL.h>)) && !defined(LGFX_LINUX_FB))
+
+#include "sdl/Bus_I2C.hpp"
+#include "sdl/Panel_sdl.hpp"
+
+#elif defined (ESP_PLATFORM)
 
  #include <sdkconfig.h>
 
@@ -94,10 +100,5 @@ Contributors:
 
 #include "arduino_default/Bus_SPI.hpp"
 
-#elif (__has_include(<SDL2/SDL.h>) || __has_include(<SDL.h>)) && !defined(LGFX_LINUX_FB)
-
-#include "sdl/Bus_I2C.hpp"
-#include "sdl/Panel_sdl.hpp"
-
 #endif
 
diff --git a/src/lgfx/v1/platforms/sdl/Panel_sdl.cpp b/src/lgfx/v1/platforms/sdl/Panel_sdl.cpp
index 13b5cc5..7f7b4bd 100644
--- a/src/lgfx/v1/platforms/sdl/Panel_sdl.cpp
+++ b/src/lgfx/v1/platforms/sdl/Panel_sdl.cpp
@@ -109,7 +109,7 @@ namespace lgfx
             {
               if (mon != nullptr)
               {
-                mon->frame_rotation = (mon->frame_rotation += event.key.keysym.sym == SDLK_r ? 1 : -1);
+                mon->frame_rotation += (event.key.keysym.sym == SDLK_r ? 1 : -1);
                 int x, y, w, h;
                 SDL_GetWindowSize(mon->window, &w, &h);
                 SDL_GetWindowPosition(mon->window, &x, &y);
